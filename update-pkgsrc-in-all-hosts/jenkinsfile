pipeline {
  agent {label 'Jenkins'}

  stages {
    stage('Update pkgsrc in all hosts') {
      parallel {
        stage('builder') {
          agent {
            label 'src-builder'
          }
          steps {
            build(job: 'update-pkgsrc')
          }
        }
        stage('jenkins') {
          agent {
            label 'Jenkins'
          }
          steps {
            build(job: 'update-pkgsrc')
          }
        }
        stage('zabbix') {
          agent {
            label 'Zabbix'
          }
          steps {
            build(job: 'update-pkgsrc')
          }
        }
      }
    }
  }
}
